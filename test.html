<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div id="root"></div>
        <script src='portableCalendar.js'></script>
        <script type='text/javascript'>
            window.onload = function(){
                portableCalendar({
                primaryColor: '#0E302C',
                accentColor: '#2C9C91',
                root: 'root',
                eventLink: "/planner/event-create/",
                showMonth: true,
                showWeek: true,
                offsetTop: 0,
                showDay: true,
                monthHook: function(month, year, component){
                    axios({
                        method: 'GET',
                        url: `/planner/api/calendar/month/${year}/${month}`
                    }).then(res =>{
                        component.setState({
                            events: res.data.map(evt =>({
                                id: evt.id,
                                date: new Date(evt.date),
                                title: evt.title
                            }))
                        })
                    })
                },
                weekHook: function(day, month, year, component){
                    axios({
                        method: 'GET',
                        url: `/planner/api/calendar/week/${year}/${month}/${day}`
                    }).then(res =>{
                        component.setState({
                            events: res.data.map(evt =>({
                                id: evt.id,
                                date: new Date(evt.date),
                                title: evt.title,
                                start:evt.start,
                                end: evt.end
                            }))
                        })
                    })
                },
                dayHook: function(day, month, year, component){
                    axios({
                        method: 'GET',
                        url: `/planner/api/calendar/day/${year}/${month}/${day}`
                    }).then(res =>{
                        component.setState({
                            events: res.data.map(evt =>({
                                id: evt.id,
                                date: new Date(evt.date),
                                title: evt.title,
                                start:evt.start,
                                end: evt.end
                            }))
                        })
                    })
                }
            })
            }
        </script>
    </body>
</html>